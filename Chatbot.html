<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>Dumb Chatbot</title>
		<meta name="description" content="Page Loading Effects: Modern ways of revealing new content" />
		<meta name="keywords" content="page loading, svg animation, loading effect, fullscreen svg" />
		<meta name="author" content="Codrops" />
		
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<script src="js/snap.svg-min.js"></script>
		<script src="js.js"></script>
		<link rel="stylesheet" type="text/css" href="css.css">
		
		<script type="text/javascript" src="jquery-3.2.1.min.js"></script>
		
		<!--[if IE]>
  		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<div id="pagewrap" class="pagewrap">
			<div class="container show" id="page-1">
				<!-- Top Navigation -->
				<div class="codrops-top clearfix">
					
			</div>
				<header class="codrops-header">
					<h1>Dumb Chatbot</h1>
				</header>
				<section class="columns clearfix">
					<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
					<div align="center">
						<p>To start the Dump Chatbot, click the start button</p>
						<p><a  class="pageload-link" href="#page-2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></p>
					</div>
				</section>
				
		</div><!-- /container -->

			<!-- The new page dummy; this would be dynamically loaded content -->
			<div class="container" id="page-2" >
				<!-- Top Navigation -->
				<div class="codrops-top clearfix">
					<button onclick="myFunction()" class="dropbtn">Language</button>
 						<div id="myDropdown" class="dropdown-content">
 						<a href="#" onclick="thLang()">TH</a>
   						<a href="#" onclick="enLang()">EN</a>
    					<a href="#" onclick="chLang()">CH</a>
 						</div>
				</div>
				
					<div  class="frame" align="center">
						
								

		       					    <div>
		       					    		<ul></ul> 
                						<div class="macro" style="margin:auto;width: 50%" align="center">

                   						    <input onkeydown="enter(event)" name="" id="sub" type="text/reset" placeholder="Message" style="height: 50px;width: 100%;border-radius: 6px;border: 0px;">
                   						    <button class="button button5" onclick="resetChat()" style="height: 50px;width: 150px;border-radius: 5px;">Clear</button>
                   						    <button class="button button5" onclick="changColor()" id="ch" style="height: 50px;width: 150px;border-radius: 5px;">Color</button>
                   						    <audio id="audio" src="http://www.soundjay.com/button/beep-07.wav" autostart="false" ></audio>
			    						</div>
            						</div>

    				</div>        
					
					
				
			</div><!-- /container -->

			<div id="loader" class="pageload-overlay" data-opening="M 0,60 80,60 80,50 0,40 0,60;M 0,60 80,60 80,25 0,40 0,60;M 0,60 80,60 80,25 0,10 0,60;M 0,60 80,60 80,0 0,0 0,60" data-closing="M 0,60 80,60 80,20 0,0 0,60;M 0,60 80,60 80,20 0,40 0,60;m 0,60 80,0 0,0 -80,0">
				<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60" preserveAspectRatio="none">
					<path d="m 0,60 80,0 0,0 -80,0"/>
				</svg>
			</div><!-- /pageload-overlay -->
			
		</div><!-- /pagewrap -->
		<script src="js/classie.js"></script>
		<script src="js/svgLoader.js"></script>
		<script>
			(function() {
				var pageWrap = document.getElementById( 'pagewrap' ),
					pages = [].slice.call( pageWrap.querySelectorAll( 'div.container' ) ),
					currentPage = 0,
					triggerLoading = [].slice.call( pageWrap.querySelectorAll( 'a.pageload-link' ) ),
					loader = new SVGLoader( document.getElementById( 'loader' ), { speedIn : 200, easingIn : mina.linear } );

				function init() {
					triggerLoading.forEach( function( trigger ) {
						trigger.addEventListener( 'click', function( ev ) {
							ev.preventDefault();
							loader.show();
							// after some time hide loader
							setTimeout( function() {
								loader.hide();

								classie.removeClass( pages[ currentPage ], 'show' );
								// update..
								currentPage = currentPage ? 0 : 1;
								classie.addClass( pages[ currentPage ], 'show' );

							}, 2000 );
						} );
					} );	
				}

				init();
			})();

			// Dropdown-------------------------------------------------------


				/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown menu if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}


			// API-----------------------------------------------
	var c;
	var value;
var i=0;
	function changColor(){

		var code = ["#9FA03C","#4D75EC","#85349B","#4fc3f7","#6cc88a"];
		
		
		
		i++;
		if(i >4){
			i=0;
		}
		console.log(i);
		if(document.getElementById('ch').onclick){

			document.getElementById('page-2').style.backgroundColor = code[i];
			

		}


	}

	function show(){
		
		เอาApiมา();
		insertChat("you", c, 0);
		value = c;
		

	}
	//d582620c-e1f3-47a8-be08-a5efa5825d27
	//eb2d9858-9fa7-47f1-b2e4-b0714a320a42
	function เอาApiมา() {
		var sound = document.getElementById("audio");
		$.getJSON('https://cors-anywhere.herokuapp.com/http://sandbox.api.simsimi.com/request.p?key=d582620c-e1f3-47a8-be08-a5efa5825d27&lc='+lang+'&ft=1.0&text='+c, function(jd) {
                  
                  insertChat("me",jd.response,0)
                  sound.play();
               });
		
		
	}

	function enter(event) {
		var key = event.keyCode;
		if(key == 13){
			c = document.getElementById('sub').value;
			if(c== ''){

			
		}
		else{
			show();
			document.getElementById('sub').value = '';
		}
		}
	}

	//change language-------------------------------------------------------------------
	var lang ="th";
	function enLang () {
        lang = "en";
        console.log(lang);
    }
    function thLang () {
        lang = "th";
        console.log(lang);
    }
    function chLang () {
        lang = "ch";
        console.log(lang);
    }


		</script>
	</body>
</html>